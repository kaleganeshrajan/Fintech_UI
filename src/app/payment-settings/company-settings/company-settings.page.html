<ion-content padding="true" class="background-white">
  <form [formGroup]="formGroup" class="panel-body">
    <ion-grid class="ion-no-padding">
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="12" class="ion-no-padding">
          <ion-item lines="none" class="position-left" color="transparent">
            <ion-back-button defaultHref="/tabs"></ion-back-button>
            <ion-text class="pageTitle">Company Payment Settings</ion-text>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>

    <!-- Select Box -->
    <ion-grid>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="8" class="ion-no-padding">
          <ion-item>
            <ion-label position="floating">Select Company<span style="color: red;"> *</span></ion-label>
            <ion-select value="formGroup['CompanyName']" (ionChange)="getCompanySettings()"
              formControlName="CompanyName" interface="popover">
              <ion-select-option *ngFor="let item of companyList" value="{{item.CompanyCode}}">
                {{ item.CompanyName }}
              </ion-select-option>
            </ion-select>
            <p *ngIf="formGroup.controls['CompanyName'].errors && formGroup.controls['CompanyName'].touched"
              style="color: red;">Company selection is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="1" size-sm="1" size-md="1" size-lg="1"></ion-col>
        <ion-col size-xs="2" size-sm="2" size-md="2" size-lg="2">
        </ion-col>
      </ion-row>
    </ion-grid>

    <ion-grid class="form-card margin-large-top">
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">Account Number<span style="color: red;"> *</span></ion-label>
            <ion-input [value]="formGroup.ID" formControlName="ID" hidden type="number"></ion-input>
            <ion-input [value]="formGroup.AccountNumber" formControlName="AccountNumber" type="number"></ion-input>
            <p *ngIf="formGroup.controls['AccountNumber'].hasError('required') && formGroup.controls['AccountNumber'].touched"
              style="color: red;">Account Name is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">Bank Name<span style="color: red;"> *</span></ion-label>
            <ion-input [value]="formGroup.BankName" formControlName="BankName" type="text"></ion-input>
            <p *ngIf="formGroup.controls['BankName'].hasError('required') && formGroup.controls['BankName'].touched"
              style="color: red;">Bank Name is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">Bank Account Name<span style="color: red;"> *</span></ion-label>
            <ion-input [value]="formGroup.BankAccountName" formControlName="BankAccountName" type="text"></ion-input>
            <p *ngIf="formGroup.controls['BankAccountName'].hasError('required') && formGroup.controls['BankAccountName'].touched"
              style="color: red;">Bank Account Name is mandatory.</p>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">IFSC Code<span style="color: red;"> *</span></ion-label>
            <ion-input [value]="formGroup.IFSCCode" type="text" formControlName="IFSCCode" autocapitalize="characters">
            </ion-input>
            <p *ngIf="formGroup.controls['IFSCCode'].hasError('required') && formGroup.controls['IFSCCode'].touched"
              style="color: red;">IFCS Code is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="mt-4">
          <ion-item>
            <ion-label position="floating">Select Account Type <span style="color: red;"> *</span></ion-label>
            <ion-select value="{{formGroup['AccountType']}}" interface="popover" formControlName="AccountType">
              <ion-select-option *ngFor="let item of AccountType" value={{item.Code}}>
                {{ item.Name }}
              </ion-select-option>
            </ion-select>
            <p *ngIf="formGroup.controls['AccountType'].errors && formGroup.controls['AccountType'].touched"
              style="color: red;">Account Type is required</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">UPI<span style="color: red;"> *</span></ion-label>
            <ion-input [value]="formGroup.UPI" formControlName="UPI" type="text"></ion-input>
            <p *ngIf="formGroup.controls['UPI'].hasError('required') && formGroup.controls['UPI'].touched"
              style="color: red;">UPI is mandatory.</p>
          </ion-item>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="margin-small-top">
          <ion-item>
            <ion-label>Is Beneficiary Active</ion-label>
            <ion-checkbox [checked]="formGroup.IsBeneficiaryActive" formControlName="IsBeneficiaryActive"
              color="primary" slot="start"></ion-checkbox>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="margin-small-top">
          <ion-item>
            <ion-label>Allow Collection form digital Payment Mode</ion-label>
            <ion-checkbox [checked]="formGroup.IsAllowCollDigiPay" formControlName="IsAllowCollDigiPay" color="primary"
              slot="start"></ion-checkbox>
            <p *ngIf="formGroup.controls['IsAllowCollDigiPay'].hasError('required') && formGroup.controls['IsAllowCollDigiPay'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="margin-small-top">
          <ion-item>
            <ion-label>Enable to receive E-Cheque</ion-label>
            <ion-checkbox [checked]="formGroup.EnableECheque" formControlName="EnableECheque" color="primary"
              slot="start"></ion-checkbox>
            <p *ngIf="formGroup.controls['EnableECheque'].hasError('required') && formGroup.controls['EnableECheque'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="mt-13">
          <ion-item>
            <ion-label>E-Cheque Collection Type</ion-label>
            <ion-select value="{{formGroup['ECCollType']}}"
              disabled="{{formGroup.value.EnableECheque==true ? false : true}}" formControlName="ECCollType"
              interface="popover">
              <ion-select-option *ngFor="let item of EChequeCT" value="{{item.Code}}">{{item.Name}}</ion-select-option>
            </ion-select>
            <p *ngIf="formGroup.controls['EnableECheque'].hasError('required') && formGroup.controls['EnableECheque'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">E-Cheque Collection settlement Value</ion-label>
            <ion-input [value]="formGroup.ECCollValue" disabled="{{formGroup.value.EnableECheque==true ? false : true}}"
              formControlName="ECCollValue" type="text" autocapitalize="characters"></ion-input>
            <p *ngIf="formGroup.controls['ECCollValue'].hasError('required') && formGroup.controls['ECCollValue'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">Payment Period (for Pull based only)</ion-label>
            <ion-input [value]="formGroup.PaymentPeriod"
              disabled="{{formGroup.value.EnableECheque==true && formGroup.value.ECCollType=='PULL' ? false : true}}"
              formControlName="PaymentPeriod" type="number"></ion-input>
            <p *ngIf="formGroup.controls['PaymentPeriod'].hasError('required') && formGroup.controls['PaymentPeriod'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="7" style="padding-top: 20px !important">
          <span *ngIf="formGroup.value.EnableECheque==true && formGroup.value.ECCollType=='PULL'" class="small">For example: If you put the payment period as 7
            Days, the system will schedule the
            payment for the distributors on the 7th Working Day from the invoice / LR Date
          </span>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <span>
            <ion-input [value]="formGroup.ExceptionList"
              disabled="{{formGroup.value.EnableECheque==true ? false : true}}" type="file"
              (change)="onEcxeptionListUpload($event)" formControlName="ExceptionList"></ion-input>
            <ion-text>Upload exception distributor list</ion-text>
          </span>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="mt-13">
          <ion-item>
            <ion-label>Exception Type</ion-label>
            <ion-select value="{{formGroup['ExceptionType']}}"
              disabled="{{formGroup.value.EnableECheque==true ? false : true}}" formControlName="ExceptionType"
              interface="popover">
              <ion-select-option *ngFor="let item of EChequeCT" value="{{item.Code}}">{{item.Name}}</ion-select-option>
            </ion-select>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">Payment Period (for exceptional {{formGroup.value.ExceptionType}} based only)
            </ion-label>
            <!-- disabled="{{formGroup.value.EnableECheque==true && formGroup.value.ECCollType=='PUSH' ? false : true}}" -->
            <ion-input [value]="formGroup.PaymentPeriodLimit"
              disabled="{{formGroup.value.ExceptionType=='PUSH' || formGroup.value.ExceptionType=='PULL' ? false : true}}"
              formControlName="PaymentPeriodLimit" type="number">
            </ion-input>
            <p *ngIf="formGroup.controls['PaymentPeriodLimit'].hasError('required') && formGroup.controls['PaymentPeriodLimit'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- ========================================== -->
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="6" class="margin-small-top">
          <ion-item>
            <ion-label>Allow modify echeque date by Company</ion-label>
            <ion-checkbox [checked]="formGroup.ModifyECByComp" formControlName="ModifyECByComp" color="primary"
              slot="start"></ion-checkbox>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="6" class="margin-small-top">
          <ion-item>
            <ion-label>Allow modify echeque date by Distributor</ion-label>
            <ion-checkbox [checked]="formGroup.ModifyECByDist" formControlName="ModifyECByDist" color="primary"
              slot="start"></ion-checkbox>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="6" class="margin-small-top">
          <ion-item>
            <ion-label>Allow cancel echeque by Company</ion-label>
            <ion-checkbox [checked]="formGroup.CancelECByComp" formControlName="CancelECByComp" color="primary"
              slot="start"></ion-checkbox>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="6" class="margin-small-top">
          <ion-item>
            <ion-label>Allow cancel echeque by Distributor</ion-label>
            <ion-checkbox [checked]="formGroup.CancelECByDist" formControlName="CancelECByDist" color="primary"
              slot="start"></ion-checkbox>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- =================================== -->
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="margin-small-top">
          <ion-item>
            <ion-label>Enable UPI Collection</ion-label>
            <ion-checkbox [checked]="formGroup.EnableUPIColl" formControlName="EnableUPIColl" color="primary"
              slot="start"></ion-checkbox>
            <p *ngIf="formGroup.controls['EnableUPIColl'].hasError('required') && formGroup.controls['EnableUPIColl'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="mt-13">
          <ion-item>
            <ion-label>UPI Collection Type</ion-label>
            <ion-select value="{{formGroup['UCollType']}}"
              disabled="{{formGroup.value.EnableUPIColl==true ? false : true}}" formControlName="UCollType"
              interface="popover">
              <ion-select-option *ngFor="let item of UpiCT" value="{{item.Code}}">{{item.Name}}
              </ion-select-option>
            </ion-select>
            <p *ngIf="formGroup.controls['UCollType'].hasError('required') && formGroup.controls['UCollType'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">UPI Collection settlement Value</ion-label>
            <ion-input [value]="formGroup.UCollValue" disabled="{{formGroup.value.EnableUPIColl==true ? false : true}}"
              formControlName="UCollValue" type="text" autocapitalize="characters"></ion-input>
            <p *ngIf="formGroup.controls['UCollValue'].hasError('required') && formGroup.controls['UCollValue'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="margin-small-top">
          <ion-item>
            <ion-label>Enable To Receive Net-banking Payment</ion-label>
            <ion-checkbox [checked]="formGroup.EnableNetBanking" formControlName="EnableNetBanking" color="primary"
              slot="start"></ion-checkbox>
            <p *ngIf="formGroup.controls['EnableNetBanking'].hasError('required') && formGroup.controls['EnableNetBanking'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4" class="mt-13">
          <ion-item>
            <ion-label>Net-banking Collection Type</ion-label>
            <ion-select value="{{formGroup['NBCollType']}}"
              disabled="{{formGroup.value.EnableNetBanking==true ? false : true}}" formControlName="NBCollType"
              interface="popover">
              <ion-select-option *ngFor="let item of NBCT" value="{{item.Code}}">{{item.Name}}</ion-select-option>
            </ion-select>
            <p *ngIf="formGroup.controls['NBCollType'].hasError('required') && formGroup.controls['NBCollType'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
        <ion-col size-xs="12" size-sm="12" size-md="6" size-lg="4">
          <ion-item>
            <ion-label position="floating">Net-banking Collection settlement Value</ion-label>
            <ion-input [value]="formGroup.NBCollValue"
              disabled="{{formGroup.value.EnableNetBanking==true ? false : true}}" formControlName="NBCollValue"
              type="text" autocapitalize="characters"></ion-input>
            <p *ngIf="formGroup.controls['NBCollValue'].hasError('required') && formGroup.controls['NBCollValue'].touched"
              style="color: red;">This field is mandatory.</p>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- ======================== -->

      <!-- ======================== -->

    </ion-grid>

    <ion-grid class="margin-small-top margin-small-left">
      <ion-row class="padding-mini">
        <ion-col size-xs="12" size-sm="12" size-md="12" size-lg="12">
          <ion-button (click)="saveUpdateSetting()">
            <ion-icon slot="start" name="save"></ion-icon>
            <small>{{saveUpdateButton}}</small>
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>

  </form>
</ion-content>